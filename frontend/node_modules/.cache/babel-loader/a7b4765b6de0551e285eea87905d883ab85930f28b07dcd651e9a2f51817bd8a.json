{"ast":null,"code":"import _regeneratorRuntime from\"/Users/luuduylinh/Desktop/PhoneStore/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/luuduylinh/Desktop/PhoneStore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/luuduylinh/Desktop/PhoneStore/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./OrderDetail.module.scss\";import classNames from'classnames/bind';import{useEffect,useState}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faChevronDown,faClose}from'@fortawesome/free-solid-svg-icons';import*as orderService from\"../../../services/orderService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cx=classNames.bind(styles);function OrderDetail(props){var _useState=useState(props.data.status),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),statusList=_useState4[0],setStatusList=_useState4[1];var VND=new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'});var handleUpdateOrder=function handleUpdateOrder(){var updateOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return orderService.updateOrder(props.data._id,props.data.products,status);case 2:case\"end\":return _context.stop();}},_callee);}));return function updateOrder(){return _ref.apply(this,arguments);};}();updateOrder();props.callbackOrderDetailModal(false);};var handleStatusList=function handleStatusList(){setStatusList(!statusList);};useEffect(function(){return setStatusList(false);},[status]);return/*#__PURE__*/_jsxs(\"div\",{className:cx('modal'),onClick:function onClick(){return props.callbackOrderDetailModal(false);},children:[/*#__PURE__*/_jsx(\"div\",{className:cx('modal__overlay')}),/*#__PURE__*/_jsx(\"div\",{className:cx('modal__body'),onClick:function onClick(e){return e.stopPropagation();},children:/*#__PURE__*/_jsx(\"div\",{className:cx('wrapper'),onClick:function onClick(){return setStatusList(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:cx('inner'),children:[/*#__PURE__*/_jsxs(\"div\",{className:cx('header'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Chi ti\\u1EBFt \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faClose,className:cx('close_icon'),onClick:function onClick(e){return props.callbackOrderDetailModal(false);}})]}),/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"M\\xE3 \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsx(\"td\",{children:props.data._id})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"T\\xEAn ng\\u01B0\\u1EDDi mua\"}),/*#__PURE__*/_jsx(\"td\",{children:props.data.name})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"S\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"td\",{children:props.data.products.map(function(productInOrder,index){return\"\".concat(productInOrder.name,\"x\").concat(productInOrder.quantity).concat(index!==props.data.products.length-1&&', '||'');})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"T\\u1ED5ng thanh to\\xE1n\"}),/*#__PURE__*/_jsx(\"td\",{children:VND.format(props.data.totalPrice)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Tr\\u1EA1ng th\\xE1i \\u0111\\u01A1n h\\xE0ng\"}),/*#__PURE__*/_jsxs(\"td\",{className:cx('status'),children:[status!=='CHỜ XÁC NHẬN'?/*#__PURE__*/_jsxs(\"div\",{className:cx('status_container'),onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsx(\"input\",{value:status,onClick:handleStatusList,readOnly:true}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faChevronDown,className:cx('status_icon')})]}):status,/*#__PURE__*/_jsxs(\"div\",{className:cx('status_list'),style:statusList?{display:'block'}:{display:'none'},children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setStatus('ĐÃ HỦY');},children:\"\\u0110\\xC3 H\\u1EE6Y\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setStatus('VẬN CHUYỂN');},children:\"V\\u1EACN CHUY\\u1EC2N\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setStatus('HOÀN THÀNH');},children:\"HO\\xC0N TH\\xC0NH\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setStatus('TRẢ HÀNG/HOÀN TIỀN');},children:\"TR\\u1EA2 H\\xC0NG/HO\\xC0N TI\\u1EC0N\"})]})]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"td\",{children:props.data.phone})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0110\\u1ECBa ch\\u1EC9 nh\\u1EADn h\\xE0ng\"}),/*#__PURE__*/_jsx(\"td\",{children:props.data.address})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:status!=='Chờ xác nhận'&&/*#__PURE__*/_jsx(\"button\",{className:\"button-primary\",onClick:handleUpdateOrder,children:\"L\\u01B0u\"})})]})]})})]})})})]});}export default OrderDetail;","map":{"version":3,"names":["styles","classNames","useEffect","useState","FontAwesomeIcon","faChevronDown","faClose","orderService","jsx","_jsx","jsxs","_jsxs","cx","bind","OrderDetail","props","_useState","data","status","_useState2","_slicedToArray","setStatus","_useState3","_useState4","statusList","setStatusList","VND","Intl","NumberFormat","style","currency","handleUpdateOrder","updateOrder","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","_id","products","stop","apply","arguments","callbackOrderDetailModal","handleStatusList","className","onClick","children","e","stopPropagation","icon","name","map","productInOrder","index","concat","quantity","length","format","totalPrice","value","readOnly","display","phone","address"],"sources":["/Users/luuduylinh/Desktop/PhoneStore/src/components/Admin/Orders/OrderDetail.js"],"sourcesContent":["import styles from './OrderDetail.module.scss';\nimport classNames from 'classnames/bind';\nimport { useEffect, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronDown, faClose } from '@fortawesome/free-solid-svg-icons';\nimport * as orderService from '~/services/orderService';\n\nconst cx = classNames.bind(styles);\n\nfunction OrderDetail(props) {\n    const [status, setStatus] = useState(props.data.status);\n    const [statusList, setStatusList] = useState(false);\n    const VND = new Intl.NumberFormat('vi-VN', {\n        style: 'currency',\n        currency: 'VND',\n    });\n    const handleUpdateOrder = () => {\n        const updateOrder = async () => {\n            await orderService.updateOrder(props.data._id, props.data.products, status);\n        };\n        updateOrder();\n        props.callbackOrderDetailModal(false);\n    };\n\n    const handleStatusList = () => {\n        setStatusList(!statusList);\n    };\n\n    useEffect(() => setStatusList(false), [status]);\n\n    return (\n        <div className={cx('modal')} onClick={() => props.callbackOrderDetailModal(false)}>\n            <div className={cx('modal__overlay')}></div>\n            <div className={cx('modal__body')} onClick={(e) => e.stopPropagation()}>\n                <div className={cx('wrapper')} onClick={() => setStatusList(false)}>\n                    <div className={cx('inner')}>\n                        <div className={cx('header')}>\n                            <h3>Chi tiết đơn hàng</h3>\n                            <FontAwesomeIcon\n                                icon={faClose}\n                                className={cx('close_icon')}\n                                onClick={(e) => props.callbackOrderDetailModal(false)}\n                            />\n                        </div>\n                        <table>\n                            <tbody>\n                                <tr>\n                                    <td>Mã đơn hàng</td>\n                                    <td>{props.data._id}</td>\n                                </tr>\n                                <tr>\n                                    <td>Tên người mua</td>\n                                    <td>{props.data.name}</td>\n                                </tr>\n                                <tr>\n                                    <td>Sản phẩm</td>\n                                    <td>\n                                        {props.data.products.map(\n                                            (productInOrder, index) =>\n                                                `${productInOrder.name}x${productInOrder.quantity}${\n                                                    (index !== props.data.products.length - 1 && ', ') || ''\n                                                }`,\n                                        )}\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Tổng thanh toán</td>\n                                    <td>{VND.format(props.data.totalPrice)}</td>\n                                </tr>\n                                <tr>\n                                    <td>Trạng thái đơn hàng</td>\n                                    <td className={cx('status')}>\n                                        {status !== 'CHỜ XÁC NHẬN' ? (\n                                            <div\n                                                className={cx('status_container')}\n                                                onClick={(e) => e.stopPropagation()}\n                                            >\n                                                <input value={status} onClick={handleStatusList} readOnly />\n                                                <FontAwesomeIcon icon={faChevronDown} className={cx('status_icon')} />\n                                            </div>\n                                        ) : (\n                                            status\n                                        )}\n                                        <div\n                                            className={cx('status_list')}\n                                            style={statusList ? { display: 'block' } : { display: 'none' }}\n                                        >\n                                            <div onClick={() => setStatus('ĐÃ HỦY')}>ĐÃ HỦY</div>\n                                            <div onClick={() => setStatus('VẬN CHUYỂN')}>VẬN CHUYỂN</div>\n                                            <div onClick={() => setStatus('HOÀN THÀNH')}>HOÀN THÀNH</div>\n                                            <div onClick={() => setStatus('TRẢ HÀNG/HOÀN TIỀN')}>\n                                                TRẢ HÀNG/HOÀN TIỀN\n                                            </div>\n                                        </div>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>Số điện thoại</td>\n                                    <td>{props.data.phone}</td>\n                                </tr>\n                                <tr>\n                                    <td>Địa chỉ nhận hàng</td>\n                                    <td>{props.data.address}</td>\n                                </tr>\n                                <tr>\n                                    <td></td>\n                                    <td>\n                                        {status !== 'Chờ xác nhận' && (\n                                            <button className=\"button-primary\" onClick={handleUpdateOrder}>\n                                                Lưu\n                                            </button>\n                                        )}\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default OrderDetail;\n"],"mappings":"8XAAA,MAAO,CAAAA,MAAM,iCACb,MAAO,CAAAC,UAAU,KAAM,iBAAiB,CACxC,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,aAAa,CAAEC,OAAO,KAAQ,mCAAmC,CAC1E,MAAO,GAAK,CAAAC,YAAY,sCAAgC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExD,GAAM,CAAAC,EAAE,CAAGX,UAAU,CAACY,IAAI,CAACb,MAAM,CAAC,CAElC,QAAS,CAAAc,WAAWA,CAACC,KAAK,CAAE,CACxB,IAAAC,SAAA,CAA4Bb,QAAQ,CAACY,KAAK,CAACE,IAAI,CAACC,MAAM,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAAhDE,MAAM,CAAAC,UAAA,IAAEE,SAAS,CAAAF,UAAA,IACxB,IAAAG,UAAA,CAAoCnB,QAAQ,CAAC,KAAK,CAAC,CAAAoB,UAAA,CAAAH,cAAA,CAAAE,UAAA,IAA5CE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,GAAM,CAAAG,GAAG,CAAG,GAAI,CAAAC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CACvCC,KAAK,CAAE,UAAU,CACjBC,QAAQ,CAAE,KACd,CAAC,CAAC,CACF,GAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAA,CAAS,CAC5B,GAAM,CAAAC,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACV,CAAAnC,YAAY,CAACyB,WAAW,CAACjB,KAAK,CAACE,IAAI,CAAC0B,GAAG,CAAE5B,KAAK,CAACE,IAAI,CAAC2B,QAAQ,CAAE1B,MAAM,CAAC,yBAAAsB,QAAA,CAAAK,IAAA,MAAAR,OAAA,GAC9E,kBAFK,CAAAL,WAAWA,CAAA,SAAAC,IAAA,CAAAa,KAAA,MAAAC,SAAA,OAEhB,CACDf,WAAW,CAAC,CAAC,CACbjB,KAAK,CAACiC,wBAAwB,CAAC,KAAK,CAAC,CACzC,CAAC,CAED,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC3BxB,aAAa,CAAC,CAACD,UAAU,CAAC,CAC9B,CAAC,CAEDtB,SAAS,CAAC,iBAAM,CAAAuB,aAAa,CAAC,KAAK,CAAC,GAAE,CAACP,MAAM,CAAC,CAAC,CAE/C,mBACIP,KAAA,QAAKuC,SAAS,CAAEtC,EAAE,CAAC,OAAO,CAAE,CAACuC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAApC,KAAK,CAACiC,wBAAwB,CAAC,KAAK,CAAC,EAAC,CAAAI,QAAA,eAC9E3C,IAAA,QAAKyC,SAAS,CAAEtC,EAAE,CAAC,gBAAgB,CAAE,CAAM,CAAC,cAC5CH,IAAA,QAAKyC,SAAS,CAAEtC,EAAE,CAAC,aAAa,CAAE,CAACuC,OAAO,CAAE,SAAAA,QAACE,CAAC,QAAK,CAAAA,CAAC,CAACC,eAAe,CAAC,CAAC,EAAC,CAAAF,QAAA,cACnE3C,IAAA,QAAKyC,SAAS,CAAEtC,EAAE,CAAC,SAAS,CAAE,CAACuC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA1B,aAAa,CAAC,KAAK,CAAC,EAAC,CAAA2B,QAAA,cAC/DzC,KAAA,QAAKuC,SAAS,CAAEtC,EAAE,CAAC,OAAO,CAAE,CAAAwC,QAAA,eACxBzC,KAAA,QAAKuC,SAAS,CAAEtC,EAAE,CAAC,QAAQ,CAAE,CAAAwC,QAAA,eACzB3C,IAAA,OAAA2C,QAAA,CAAI,qCAAiB,CAAI,CAAC,cAC1B3C,IAAA,CAACL,eAAe,EACZmD,IAAI,CAAEjD,OAAQ,CACd4C,SAAS,CAAEtC,EAAE,CAAC,YAAY,CAAE,CAC5BuC,OAAO,CAAE,SAAAA,QAACE,CAAC,QAAK,CAAAtC,KAAK,CAACiC,wBAAwB,CAAC,KAAK,CAAC,EAAC,CACzD,CAAC,EACD,CAAC,cACNvC,IAAA,UAAA2C,QAAA,cACIzC,KAAA,UAAAyC,QAAA,eACIzC,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,6BAAW,CAAI,CAAC,cACpB3C,IAAA,OAAA2C,QAAA,CAAKrC,KAAK,CAACE,IAAI,CAAC0B,GAAG,CAAK,CAAC,EACzB,CAAC,cACLhC,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,4BAAa,CAAI,CAAC,cACtB3C,IAAA,OAAA2C,QAAA,CAAKrC,KAAK,CAACE,IAAI,CAACuC,IAAI,CAAK,CAAC,EAC1B,CAAC,cACL7C,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,oBAAQ,CAAI,CAAC,cACjB3C,IAAA,OAAA2C,QAAA,CACKrC,KAAK,CAACE,IAAI,CAAC2B,QAAQ,CAACa,GAAG,CACpB,SAACC,cAAc,CAAEC,KAAK,WAAAC,MAAA,CACfF,cAAc,CAACF,IAAI,MAAAI,MAAA,CAAIF,cAAc,CAACG,QAAQ,EAAAD,MAAA,CAC5CD,KAAK,GAAK5C,KAAK,CAACE,IAAI,CAAC2B,QAAQ,CAACkB,MAAM,CAAG,CAAC,EAAI,IAAI,EAAK,EAAE,GAEpE,CAAC,CACD,CAAC,EACL,CAAC,cACLnD,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,yBAAe,CAAI,CAAC,cACxB3C,IAAA,OAAA2C,QAAA,CAAK1B,GAAG,CAACqC,MAAM,CAAChD,KAAK,CAACE,IAAI,CAAC+C,UAAU,CAAC,CAAK,CAAC,EAC5C,CAAC,cACLrD,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,0CAAmB,CAAI,CAAC,cAC5BzC,KAAA,OAAIuC,SAAS,CAAEtC,EAAE,CAAC,QAAQ,CAAE,CAAAwC,QAAA,EACvBlC,MAAM,GAAK,cAAc,cACtBP,KAAA,QACIuC,SAAS,CAAEtC,EAAE,CAAC,kBAAkB,CAAE,CAClCuC,OAAO,CAAE,SAAAA,QAACE,CAAC,QAAK,CAAAA,CAAC,CAACC,eAAe,CAAC,CAAC,EAAC,CAAAF,QAAA,eAEpC3C,IAAA,UAAOwD,KAAK,CAAE/C,MAAO,CAACiC,OAAO,CAAEF,gBAAiB,CAACiB,QAAQ,MAAE,CAAC,cAC5DzD,IAAA,CAACL,eAAe,EAACmD,IAAI,CAAElD,aAAc,CAAC6C,SAAS,CAAEtC,EAAE,CAAC,aAAa,CAAE,CAAE,CAAC,EACrE,CAAC,CAENM,MACH,cACDP,KAAA,QACIuC,SAAS,CAAEtC,EAAE,CAAC,aAAa,CAAE,CAC7BiB,KAAK,CAAEL,UAAU,CAAG,CAAE2C,OAAO,CAAE,OAAQ,CAAC,CAAG,CAAEA,OAAO,CAAE,MAAO,CAAE,CAAAf,QAAA,eAE/D3C,IAAA,QAAK0C,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA9B,SAAS,CAAC,QAAQ,CAAC,EAAC,CAAA+B,QAAA,CAAC,qBAAM,CAAK,CAAC,cACrD3C,IAAA,QAAK0C,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA9B,SAAS,CAAC,YAAY,CAAC,EAAC,CAAA+B,QAAA,CAAC,sBAAU,CAAK,CAAC,cAC7D3C,IAAA,QAAK0C,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA9B,SAAS,CAAC,YAAY,CAAC,EAAC,CAAA+B,QAAA,CAAC,kBAAU,CAAK,CAAC,cAC7D3C,IAAA,QAAK0C,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA9B,SAAS,CAAC,oBAAoB,CAAC,EAAC,CAAA+B,QAAA,CAAC,oCAErD,CAAK,CAAC,EACL,CAAC,EACN,CAAC,EACL,CAAC,cACLzC,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,mCAAa,CAAI,CAAC,cACtB3C,IAAA,OAAA2C,QAAA,CAAKrC,KAAK,CAACE,IAAI,CAACmD,KAAK,CAAK,CAAC,EAC3B,CAAC,cACLzD,KAAA,OAAAyC,QAAA,eACI3C,IAAA,OAAA2C,QAAA,CAAI,0CAAiB,CAAI,CAAC,cAC1B3C,IAAA,OAAA2C,QAAA,CAAKrC,KAAK,CAACE,IAAI,CAACoD,OAAO,CAAK,CAAC,EAC7B,CAAC,cACL1D,KAAA,OAAAyC,QAAA,eACI3C,IAAA,QAAQ,CAAC,cACTA,IAAA,OAAA2C,QAAA,CACKlC,MAAM,GAAK,cAAc,eACtBT,IAAA,WAAQyC,SAAS,CAAC,gBAAgB,CAACC,OAAO,CAAEpB,iBAAkB,CAAAqB,QAAA,CAAC,UAE/D,CAAQ,CACX,CACD,CAAC,EACL,CAAC,EACF,CAAC,CACL,CAAC,EACP,CAAC,CACL,CAAC,CACL,CAAC,EACL,CAAC,CAEd,CAEA,cAAe,CAAAtC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}