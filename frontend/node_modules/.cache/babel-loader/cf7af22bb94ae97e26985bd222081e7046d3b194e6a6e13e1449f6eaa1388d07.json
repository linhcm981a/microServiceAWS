{"ast":null,"code":"var _jsxFileName = \"/Users/luuduylinh/Desktop/untitled folder 4/PhoneStore/src/components/Search/Search.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\nimport { faCircleXmark, faSearch, faSpinner } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport HeadlessTippy from '@tippyjs/react/headless';\nimport classNames from 'classnames/bind';\nimport * as productService from \"../../services/productService\";\nimport { Wrapper as PopperWrapper } from \"../Popper\";\nimport { useDebounce } from \"../../hooks\";\nimport styles from \"./Search.module.scss\";\nimport Productsearch from \"../Productsearch\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cx = classNames.bind(styles);\nfunction Search() {\n  _s();\n  const [searchValue, setSearchValue] = useState('');\n  const [searchResult, setSearchResult] = useState([]);\n  const [showResult, setShowResult] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const debouncedValue = useDebounce(searchValue, 500);\n  const inputRef = useRef();\n  useEffect(() => {\n    if (!debouncedValue.trim()) {\n      setSearchResult([]);\n      return;\n    }\n    const fetchApi = async () => {\n      setLoading(true);\n      const result = await productService.searchProduct(debouncedValue);\n      setSearchResult(result);\n      setLoading(false);\n    };\n    fetchApi();\n  }, [debouncedValue]);\n  const handleClear = () => {\n    setSearchValue('');\n    setSearchResult([]);\n    inputRef.current.focus();\n  };\n  const handleHideResult = () => {\n    setShowResult(false);\n  };\n  const handleChange = e => {\n    const searchValue = e.target.value;\n    if (!searchValue.startsWith(' ') || searchValue.trim()) {\n      setSearchValue(searchValue);\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // Using a wrapper <div> tag around the reference element solves\n    // this by creating a new parentNode context.\n    _jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(HeadlessTippy, {\n        interactive: true,\n        visible: showResult && (searchResult === null || searchResult === void 0 ? void 0 : searchResult.length) > 0,\n        render: attrs => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx('search-result'),\n          tabIndex: \"-1\",\n          ...attrs,\n          children: /*#__PURE__*/_jsxDEV(PopperWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: cx('search-title'),\n              children: \"S\\u1EA3n ph\\u1EA9m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this), searchResult === null || searchResult === void 0 ? void 0 : searchResult.map((result, index) => /*#__PURE__*/_jsxDEV(Productsearch, {\n              result: result\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this),\n        onClickOutside: handleHideResult,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: cx('search'),\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            ref: inputRef,\n            value: searchValue,\n            placeholder: \"T\\xECm ki\\u1EBFm s\\u1EA3n ph\\u1EA9m t\\u1EA1i \\u0111\\xE2y\",\n            spellCheck: false,\n            onChange: handleChange,\n            onFocus: () => setShowResult(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), !!searchValue && !loading && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: cx('clear'),\n            onClick: handleClear,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCircleXmark\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), loading && /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            className: cx('loading'),\n            icon: faSpinner\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: cx('search-btn'),\n            onMouseDown: e => e.preventDefault(),\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)\n  );\n}\n_s(Search, \"kKIV0VJf0OyNKYNeYhat6RQUruA=\", false, function () {\n  return [useDebounce];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["useEffect","useState","useRef","faCircleXmark","faSearch","faSpinner","FontAwesomeIcon","HeadlessTippy","classNames","productService","Wrapper","PopperWrapper","useDebounce","styles","Productsearch","jsxDEV","_jsxDEV","cx","bind","Search","_s","searchValue","setSearchValue","searchResult","setSearchResult","showResult","setShowResult","loading","setLoading","debouncedValue","inputRef","trim","fetchApi","result","searchProduct","handleClear","current","focus","handleHideResult","handleChange","e","target","value","startsWith","children","interactive","visible","length","render","attrs","className","tabIndex","fileName","_jsxFileName","lineNumber","columnNumber","map","index","onClickOutside","ref","placeholder","spellCheck","onChange","onFocus","onClick","icon","onMouseDown","preventDefault","_c","$RefreshReg$"],"sources":["/Users/luuduylinh/Desktop/untitled folder 4/PhoneStore/src/components/Search/Search.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport { faCircleXmark, faSearch, faSpinner } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport HeadlessTippy from '@tippyjs/react/headless';\nimport classNames from 'classnames/bind';\n\nimport * as productService from '~/services/productService';\nimport { Wrapper as PopperWrapper } from '~/components/Popper';\nimport { useDebounce } from '~/hooks';\nimport styles from './Search.module.scss';\nimport Productsearch from '../Productsearch';\n\nconst cx = classNames.bind(styles);\n\nfunction Search() {\n    const [searchValue, setSearchValue] = useState('');\n    const [searchResult, setSearchResult] = useState([]);\n    const [showResult, setShowResult] = useState(true);\n    const [loading, setLoading] = useState(false);\n\n    const debouncedValue = useDebounce(searchValue, 500);\n\n    const inputRef = useRef();\n\n    useEffect(() => {\n        if (!debouncedValue.trim()) {\n            setSearchResult([]);\n            return;\n        }\n\n        const fetchApi = async () => {\n            setLoading(true);\n\n            const result = await productService.searchProduct(debouncedValue);\n            setSearchResult(result);\n\n            setLoading(false);\n        };\n\n        fetchApi();\n    }, [debouncedValue]);\n\n    const handleClear = () => {\n        setSearchValue('');\n        setSearchResult([]);\n        inputRef.current.focus();\n    };\n\n    const handleHideResult = () => {\n        setShowResult(false);\n    };\n\n    const handleChange = (e) => {\n        const searchValue = e.target.value;\n        if (!searchValue.startsWith(' ') || searchValue.trim()) {\n            setSearchValue(searchValue);\n        }\n    };\n\n    return (\n        // Using a wrapper <div> tag around the reference element solves\n        // this by creating a new parentNode context.\n        <div>\n            <HeadlessTippy\n                interactive\n                visible={showResult && searchResult?.length > 0}\n                render={(attrs) => (\n                    <div className={cx('search-result')} tabIndex=\"-1\" {...attrs}>\n                        <PopperWrapper>\n                            <h4 className={cx('search-title')}>Sản phẩm</h4>\n                            {searchResult?.map((result, index) => (\n                                <Productsearch key={index} result={result} />\n                            ))}\n                        </PopperWrapper>\n                    </div>\n                )}\n                onClickOutside={handleHideResult}\n            >\n                <div className={cx('search')}>\n                    <input\n                        ref={inputRef}\n                        value={searchValue}\n                        placeholder=\"Tìm kiếm sản phẩm tại đây\"\n                        spellCheck={false}\n                        onChange={handleChange}\n                        onFocus={() => setShowResult(true)}\n                    />\n                    {!!searchValue && !loading && (\n                        <button className={cx('clear')} onClick={handleClear}>\n                            <FontAwesomeIcon icon={faCircleXmark} />\n                        </button>\n                    )}\n                    {loading && <FontAwesomeIcon className={cx('loading')} icon={faSpinner} />}\n                    <button className={cx('search-btn')} onMouseDown={(e) => e.preventDefault()}>\n                        <FontAwesomeIcon icon={faSearch} />\n                    </button>\n                </div>\n            </HeadlessTippy>\n        </div>\n    );\n}\n\nexport default Search;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,mCAAmC;AACtF,SAASC,eAAe,QAAQ,gCAAgC;AAChE,OAAOC,aAAa,MAAM,yBAAyB;AACnD,OAAOC,UAAU,MAAM,iBAAiB;AAExC,OAAO,KAAKC,cAAc;AAC1B,SAASC,OAAO,IAAIC,aAAa;AACjC,SAASC,WAAW;AACpB,OAAOC,MAAM;AACb,OAAOC,aAAa;AAAyB,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,EAAE,GAAGT,UAAU,CAACU,IAAI,CAACL,MAAM,CAAC;AAElC,SAASM,MAAMA,CAAA,EAAG;EAAAC,EAAA;EACd,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACsB,YAAY,EAAEC,eAAe,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACwB,UAAU,EAAEC,aAAa,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM4B,cAAc,GAAGjB,WAAW,CAACS,WAAW,EAAE,GAAG,CAAC;EAEpD,MAAMS,QAAQ,GAAG5B,MAAM,EAAE;EAEzBF,SAAS,CAAC,MAAM;IACZ,IAAI,CAAC6B,cAAc,CAACE,IAAI,EAAE,EAAE;MACxBP,eAAe,CAAC,EAAE,CAAC;MACnB;IACJ;IAEA,MAAMQ,QAAQ,GAAG,MAAAA,CAAA,KAAY;MACzBJ,UAAU,CAAC,IAAI,CAAC;MAEhB,MAAMK,MAAM,GAAG,MAAMxB,cAAc,CAACyB,aAAa,CAACL,cAAc,CAAC;MACjEL,eAAe,CAACS,MAAM,CAAC;MAEvBL,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDI,QAAQ,EAAE;EACd,CAAC,EAAE,CAACH,cAAc,CAAC,CAAC;EAEpB,MAAMM,WAAW,GAAGA,CAAA,KAAM;IACtBb,cAAc,CAAC,EAAE,CAAC;IAClBE,eAAe,CAAC,EAAE,CAAC;IACnBM,QAAQ,CAACM,OAAO,CAACC,KAAK,EAAE;EAC5B,CAAC;EAED,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;IAC3BZ,aAAa,CAAC,KAAK,CAAC;EACxB,CAAC;EAED,MAAMa,YAAY,GAAIC,CAAC,IAAK;IACxB,MAAMnB,WAAW,GAAGmB,CAAC,CAACC,MAAM,CAACC,KAAK;IAClC,IAAI,CAACrB,WAAW,CAACsB,UAAU,CAAC,GAAG,CAAC,IAAItB,WAAW,CAACU,IAAI,EAAE,EAAE;MACpDT,cAAc,CAACD,WAAW,CAAC;IAC/B;EACJ,CAAC;EAED;IAAA;IACI;IACA;IACAL,OAAA;MAAA4B,QAAA,eACI5B,OAAA,CAACT,aAAa;QACVsC,WAAW;QACXC,OAAO,EAAErB,UAAU,IAAI,CAAAF,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEwB,MAAM,IAAG,CAAE;QAChDC,MAAM,EAAGC,KAAK,iBACVjC,OAAA;UAAKkC,SAAS,EAAEjC,EAAE,CAAC,eAAe,CAAE;UAACkC,QAAQ,EAAC,IAAI;UAAA,GAAKF,KAAK;UAAAL,QAAA,eACxD5B,OAAA,CAACL,aAAa;YAAAiC,QAAA,gBACV5B,OAAA;cAAIkC,SAAS,EAAEjC,EAAE,CAAC,cAAc,CAAE;cAAA2B,QAAA,EAAC;YAAQ;cAAAQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,QAAK,EAC/ChC,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEiC,GAAG,CAAC,CAACvB,MAAM,EAAEwB,KAAK,kBAC7BzC,OAAA,CAACF,aAAa;cAAamB,MAAM,EAAEA;YAAO,GAAtBwB,KAAK;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,QAC5B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QACU;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAEtB;QACFG,cAAc,EAAEpB,gBAAiB;QAAAM,QAAA,eAEjC5B,OAAA;UAAKkC,SAAS,EAAEjC,EAAE,CAAC,QAAQ,CAAE;UAAA2B,QAAA,gBACzB5B,OAAA;YACI2C,GAAG,EAAE7B,QAAS;YACdY,KAAK,EAAErB,WAAY;YACnBuC,WAAW,EAAC,0DAA2B;YACvCC,UAAU,EAAE,KAAM;YAClBC,QAAQ,EAAEvB,YAAa;YACvBwB,OAAO,EAAEA,CAAA,KAAMrC,aAAa,CAAC,IAAI;UAAE;YAAA0B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QACrC,EACD,CAAC,CAAClC,WAAW,IAAI,CAACM,OAAO,iBACtBX,OAAA;YAAQkC,SAAS,EAAEjC,EAAE,CAAC,OAAO,CAAE;YAAC+C,OAAO,EAAE7B,WAAY;YAAAS,QAAA,eACjD5B,OAAA,CAACV,eAAe;cAAC2D,IAAI,EAAE9D;YAAc;cAAAiD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAG;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAE/C,EACA5B,OAAO,iBAAIX,OAAA,CAACV,eAAe;YAAC4C,SAAS,EAAEjC,EAAE,CAAC,SAAS,CAAE;YAACgD,IAAI,EAAE5D;UAAU;YAAA+C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAG,eAC1EvC,OAAA;YAAQkC,SAAS,EAAEjC,EAAE,CAAC,YAAY,CAAE;YAACiD,WAAW,EAAG1B,CAAC,IAAKA,CAAC,CAAC2B,cAAc,EAAG;YAAAvB,QAAA,eACxE5B,OAAA,CAACV,eAAe;cAAC2D,IAAI,EAAE7D;YAAS;cAAAgD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UAAG;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAC9B;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MACP;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IACM;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EACd;AAEd;AAACnC,EAAA,CAtFQD,MAAM;EAAA,QAMYP,WAAW;AAAA;AAAAwD,EAAA,GAN7BjD,MAAM;AAwFf,eAAeA,MAAM;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}